<div class="container-fluid py-4">
    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h1 class="card-title mb-0 h2">
                        <i class="fas fa-clipboard-list me-2"></i>
                        Quản lý câu hỏi
                    </h1>
                </div>
            </div>
        </div>
    </div>

    <!-- Form chọn dạng bài -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h2 class="card-title mb-0 h5">
                        <i class="fas fa-plus-circle me-2"></i>
                        Danh sách câu hỏi
                    </h2>
                </div>
                <div class="card-body" style="padding: 30px; overflow: visible;">
                    <!-- Row 1: Exam Type và Level -->
                    <div class="row g-3">
                        <!-- Chọn Exam Type -->
                        <div class="col-md-4">
                            <label for="examTypeSelect" class="form-label fw-semibold">
                                <i class="fas fa-layer-group me-1"></i>
                                Chọn dạng bài thi
                            </label>
                            <select id="examTypeSelect" class="form-select" [(ngModel)]="selectedExamType"
                                (ngModelChange)="onExamTypeChange()">
                                <option value="">-- Chọn dạng bài --</option>
                                @for(examType of examTypes$ | async; track examType.id) {
                                <option [value]="examType.id">{{ examType.name }}</option>
                                }
                            </select>
                        </div>
                        
                        <!-- Chọn Level -->
                        @if(selectedExamType) {
                        <div class="col-md-4">
                            <label for="levelSelect" class="form-label fw-semibold">
                                <i class="fas fa-layer-group me-1"></i>
                                Chọn cấp độ
                            </label>
                            <select id="levelSelect" class="form-select" [(ngModel)]="selectedLevel"
                                (ngModelChange)="onLevelChange()">
                                <option value="">-- Chọn cấp độ --</option>
                                @for(level of levels$ | async; track level.id) {
                                <option [value]="level.id">{{ level.name }}</option>
                                }
                            </select>
                        </div>
                        }
                    </div>

                    <!-- Row 2: Skill Level - Tách riêng để tránh overlap -->
                    @if(selectedLevel) {
                    <div class="row g-3 mt-3">
                        <div class="col-md-6">
                            <label for="skillSelect" class="form-label fw-semibold">
                                <i class="fas fa-tools me-1"></i>
                                Chọn kỹ năng
                            </label>
                            <select id="skillSelect" class="form-select dropdown-with-space" 
                                    [(ngModel)]="selectedSkillLevel"
                                    (ngModelChange)="onSkillLevelChange()">
                                <option value="">-- Chọn kỹ năng --</option>
                                @for(skillLevel of skillLevels; track skillLevel.id) {
                                <option [value]="skillLevel.id">
                                    {{ skillLevel.skillName }}
                                </option>
                                }
                            </select>
                        </div>
                    </div>
                    }

                    <!-- Row 3: Range - Tách riêng và có khoảng cách -->
                    @if(selectedSkillLevel) {
                    <div class="row g-3 mt-3">
                        <div class="col-md-6">
                            <label for="rangeSelect" class="form-label fw-semibold">
                                <i class="fas fa-list me-1 text-brightlang"></i>
                                Chọn dạng bài
                            </label>
                            <select id="rangeSelect" class="form-select dropdown-with-space" 
                                    [(ngModel)]="selectedRange"
                                    (ngModelChange)="onRangeChange()"
                                    [attr.aria-label]="'Chọn dạng bài'">
                                <option value="" disabled>-- Chọn dạng bài --</option>
                                @for(range of ranges$ | async; track range.id) {
                                <option [value]="range.id">
                                    {{ range.name }}
                                </option>
                                }
                            </select>
                        </div>
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>

    @if(selectedRange) {
    <!-- Danh sách dạng bài -->
    <div class="row">
        <div class="col-12">
            <router-outlet></router-outlet>
        </div>
    </div>
    }
</div>